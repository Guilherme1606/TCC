--Criação de todas as tabelas da aplicação
CREATE TABLE TB_CADASTRO_USUARIO (
ID NUMBER NOT NULL,
USUARIO VARCHAR (10)NOT NULL,
NOME_COMPLETO VARCHAR(50) NOT NULL,
EMAIL VARCHAR(50) NOT NULL,
SENHA VARCHAR(8) NOT NULL,
STATUS VARCHAR(9),
PERMISSAO VARCHAR(6)
)tablespace GLOBUS_TABLE;

CREATE SEQUENCE IDENTIFICADOR; 

ALTER TABLE TB_CADASTRO_USUARIO
ADD CONSTRAINT PK_TB_CADASTRO_USUARIO PRIMARY KEY (ID)
USING INDEX  tablespace GLOBUS_INDEX; 
---------------------------------------------------------
CREATE TABLE TB_CADASTRO_CLIENTE (
CPF                  VARCHAR (11) NOT NULL,
NOME_COMPLETO        VARCHAR(50)  NOT NULL,
ENDERECO             VARCHAR(50)  NOT NULL,
NUMERO               NUMBER       NOT NULL,
BAIRRO               VARCHAR(20)  NOT NULL,
CEP                  NUMBER       NOT NULL,
MUNICIPIO            VARCHAR(20)  NOT NULL,
UF                   VARCHAR(2)   NOT NULL,
CONTATO              VARCHAR(10)  NOT NULL
)tablespace GLOBUS_TABLE;


ALTER TABLE TB_CADASTRO_CLIENTE
ADD CONSTRAINT PK_TB_CADASTRO_CLIENTE PRIMARY KEY (CPF)
USING INDEX  tablespace GLOBUS_INDEX; 
----------------------------------------------------------------

CREATE TABLE TB_CADASTRO_CONTRATO (
ID_CONTRATO          NUMBER       NOT NULL,
CPF                  VARCHAR (11) NOT NULL,
SERVICO              VARCHAR(25)  NOT NULL,
INICIO               VARCHAR(50)  NOT NULL,
ENTREGA              VARCHAR(50)  NOT NULL,
VALOR                NUMBER(15,2) NOT NULL,
STATUS               VARCHAR(12),
USUARIO_RESPONSAVEL  NUMBER
)tablespace GLOBUS_TABLE;

CREATE SEQUENCE IDENTIFICADOR_CONTRATO; 

ALTER TABLE TB_CADASTRO_CONTRATO
ADD CONSTRAINT PK_TB_CADASTRO_CONTRATO PRIMARY KEY (ID_CONTRATO);


ALTER TABLE TB_CADASTRO_CONTRATO
ADD CONSTRAINT FK_TB_CADASTRO_CONTRATO FOREIGN KEY (CPF)
REFERENCES TB_CADASTRO_CLIENTE (CPF)ON DELETE CASCADE;

ALTER TABLE TB_CADASTRO_CONTRATO
ADD CONSTRAINT FK_TB_CADASTRO_CONTRATO_ FOREIGN KEY (USUARIO_RESPONSAVEL)
REFERENCES TB_CADASTRO_USUARIO (ID);


SELECT CLI.*,
       CONTRATO.INICIO,
       CONTRATO.ENTREGA,
       CONTRATO.STATUS
FROM TB_CADASTRO_CLIENTE           CLI
LEFT JOIN TB_CADASTRO_CONTRATO CONTRATO  
ON CONTRATO.CPF = CLI.CPF
WHERE CLI.CPF = '26364466052';


SELECT CONTRATO.*,
       CLI.NOME_COMPLETO   
FROM TB_CADASTRO_CONTRATO CONTRATO,TB_CADASTRO_CLIENTE CLI
WHERE CLI.CPF = CONTRATO.CPF






SELECT * FROM TB_CADASTRO_USUARIO;
SELECT * FROM TB_CADASTRO_CONTRATO;
select * from TB_CADASTRO_CLIENTE; 